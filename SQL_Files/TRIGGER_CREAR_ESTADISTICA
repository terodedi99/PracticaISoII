CREATE OR REPLACE TRIGGER CREAR_ESTADISTICA
    AFTER UPDATE OF ESTADO ON SERVICIOS
    FOR EACH ROW
BEGIN
    IF :OLD.ESTADO != :NEW.ESTADO THEN
        IF :NEW.ESTADO NOT IN ('LIBRE', 'RESERVADA') THEN
            INSERT INTO ESTADISTICAS VALUES (SEQ_ID_ESTADISTICA.NEXTVAL, :NEW.ID_SERVICIO, :NEW.ESTADO, SYSDATE);
        END IF;
    END IF;
END;